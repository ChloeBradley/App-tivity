<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>
<head>
  <video id="bgvid" autoplay="autoplay" muted="muted" preload="auto" loop="true">
     <source src="http://mazwai.com/system/posts/videos/000/000/123/original/victor_ciurus--5d_mark_iii_magic_lantern_14_bits_raw_video.mp4?1412890624" type="video/mp4">
     <source src="http://mazwai.com/system/posts/videos/000/000/123/original/victor_ciurus--5d_mark_iii_magic_lantern_14_bits_raw_video.webm?1412890624">
  </video>
</head>

<div class="container-fluid">
<% @events.each do |event| %>
  <% if event["title"] && event["description"].present? %>

        <h1> <%= event["title"] %> </h1>
        <% if strip_tags(event["description"]) %>
          <div class=""</div>
          <p> <%= strip_tags(event["description"]).gsub('&amp;', '&').gsub('&quot;', '"') %> </p>
        <% end %>

        <% if event["image"] && event["image"]["medium"]%>

          <%=link_to image_tag event["image"]["medium"]["url"] %>
        <% end %>

        <br/>
      <hr/>
    <% end %>
  <% end %>
</div>

<div style='width: 800px;'>
  <div id="map" style='width: 800px; height: 400px;'></div>
</div>

    <script type="text/javascript">
      handler = Gmaps.build('Google');
      handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
        markers = handler.addMarkers(<%=raw @hash.to_json %>);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
      });
    </script>
